if(BUILD_EVERYTHING)
    add_subdirectory( bigbrother )
endif(BUILD_EVERYTHING)

add_subdirectory( bracketing2hdr )
add_subdirectory( colorrange )
add_subdirectory( colorspaceconversion )
add_subdirectory( compose )
add_subdirectory( dropshadow )
add_subdirectory( histogram )
add_subdirectory( imagesize )
add_subdirectory( metadataeditor )
add_subdirectory( modify_selection )
add_subdirectory( rotateimage )
if(BUILD_EVERYTHING)
    add_subdirectory( scripting ) # TODO: port it to the change of KisFilter
endif(BUILD_EVERYTHING)
add_subdirectory( separate_channels )
add_subdirectory( shearimage )
add_subdirectory( smallcolorselector )
add_subdirectory( specificcolorselector )
add_subdirectory( together )
add_subdirectory( tonemapping )
add_subdirectory( trianglecolorselector )
add_subdirectory( histogram_docker )

macro_optional_find_package(GMM)

macro_log_feature(GMM_FOUND "Gmm++" "Generic C++ template library for sparse, dense and skyline matrices" "http://home.gna.org/getfem/download.html" FALSE "" "Required by the Krita panorama plugin")
macro_log_feature(HAVE_OPENGL "OpenGL" "OpenGL support" "" FALSE "" "Required by the Krita shader filter plugin")
macro_log_feature(HAVE_GLEW "GLEW" "The OpenGL Extension Wrangler Library" "http://glew.sourceforge.net" FALSE "" "Required by the Krita shader filter plugin")

if(GMM_FOUND AND NOT MSVC)
    if(BUILD_EVERYTHING)
        add_subdirectory( panorama )
    endif(BUILD_EVERYTHING)
endif(GMM_FOUND AND NOT MSVC)

if(HAVE_OPENGL AND HAVE_GLEW)
    if(BUILD_EVERYTHING)
        add_subdirectory( glsl )
    endif(BUILD_EVERYTHING)
endif(HAVE_OPENGL AND HAVE_GLEW)
