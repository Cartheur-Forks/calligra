Krita TODO

This it the TODO list for the first release of Krita, which I hope we
will be able to make in September or October. This release will be limited
to 8-bit per channel and one, or at most two working color models (RGBA 
and CMYK). (XXX: bitmap and grayscale, too? I don't think there's any
urgency for indexed images like gifs.)

The very first thing that's needed to at least enable me to use Krita
to maintain the Krita screenshots page is screenshot and scale :-).

Items with a hash have work started on them.

Scaling

	- replace calloc and free by new and delete.
	- check if memory allocations fail and free the resources if
	  they fail.
	- replace the structs CONTRIB and CLIST by some STL or Qt
	  container.
	- mode the code to a visitor class.
	- Add progressinfo
	- There is still a bug. The rightmost pixels in the scaled
	  image are wrong. Actually it is not really a bug in the
	  scaling code, if you draw a one pixel line at the rightmost
	  edge of the image and scale it, the line is still there,
	  there is just an addition line right of it. So the image is
	  not scaled to the actual target width
	- use iterators to access pixels.
        - Preview dialog should use KDialogBase
        - Decide on more user-friendly names for the scaling algs.

Core

	* Discontinuous selections (A byte-map mask for a whole image)
	  (#Boudewijn)
	* Channels showing (note that we don't do Gimp-type grayscale
	  mask channels, just showing/hiding the various color
	  channels.
	* Histogram computations (#Boudewijn)
	* Adjustment layers (Layers that dynamically apply a filter to
	  the layer they are linked to, these do not store actual
	  image date, except for an occasional mask)
	* Mask layers
	* Loading and saving of selections
	C Painting of gradients
        X loading Gimp gradients
	* Colorspace-aware difference between pixel function
	* Anti-aliased filling (requires some simple colorspace
	  function to merge 2 Pixels) -> also, make fill use
	  the new cancelable progress meter the gradient tool uses.
	* Load/save configuration of everything user-settable.
	* Add filtering with image kernels (3 * 3 blocks of pixels)
	* Scaling of images (#Boudewijn, Bart, Michael)
	* Fix composite ops (nick from the code gwenview nicked for
	  the xcf import)
	* Make toolbox look like Karbon's toolbox, but follow the
	  layout of photoshop's toolbox for minimum confusability.
        * Rework iterators to allow iterating over pixels (#Cyrillle, Casper)
        * Auto-extending layers (#Casper)
        X Code cleanup (make naming conformant to Qt) (#Dirk)
        * Lock layers (make inaccessible) See bug #90456.

User Interface

        * Give color strategies an option page just like tools. Give layers an option page,
	  combine both pages to show for layer properties. Color strategies can be stateful.
	* Replace krita ruler with koruler. (This may be impossible because Krita doesn't use pages)
	* Create brush-shape outline cursor
	* All dialogs ui-fied (#Boudewijn, Sven, Casper)
	* Tabs in dockers drag-and-droppable (vector of docker
	  windows, create new docker if tab dropped outside existing
	  docker window)
	* Implement the following dialogs / widgets:
		    - Select by color range (#Boudewijn)
		    - Variations (#Boudewijn)
		    - Transform (#Boudewijn)
		    - Gradient (nick from Scribus?)
		    - Histogram (#Boudewijn)
		    - Modify curves (nick from Perico)
	* Add history docker
	* Add auto-scroll to canvas while painting	  
	X Full-screen mode (#Boudewijn -- this should work, but it doesn't. Don't know
          why :-(.)
	* Add previews to all relevant dialogs. (XXX: let preview work 
	  on rendered QImage, or on scaled image?)(#Bart) 
	X Allow an active tool for every pointer present in X. (#Adrian -- no
          support yet for Wacom tablets that have more than one stylus)
	* File/Open should list all image types Krita can handle, and simply
          import non-native images, instead of forcing the user to use the import
          image menu item.
	* Allow guides to be disabled. Allow diagonal guides (useful
	  for perspective drawings)
        * Create templates for often-used image formats. Add save-as-template
        * Check OASIS file saving.
Tools

	* All tools must have a tool options tab (#Boudewijn, Adrian, Cyrille)
	* Loading and saving of tool state (XXX: do we really want this? It is
          horribly confusing in the Gimp)
	* Implement the following tools: 
		    - Elliptical selection (#Boudewijn)
		    - Crop (This is a must-have -- tried to do something with Krita
                         today and had to go to the Gimp)
		    - Freehand selection (#Boudewijn)
		    - Polygonal selection (#Boudewijn)
		    - Continguous selection (magic wand) (#Boudewijn)
		    - pen(cil) tool (same as brush, but not anti-aliased) (#Boudewijn,
                      done, except there's still a little ant-aliasing present, perhaps
                      dependent on the brush).
		    - fix airbrush tool (add rate option, add increase
		      of brush size if kept in one place)
		    - poly-line tool
		    - rectangle tool (#Clarence, still some work to with opacity and so on)
		    - ellipse too (#Clarence, still some work to with opacity and so on)l
		    - polygon tool
		    - color changer, smudge tool,sharpen tool, blur
		      tool, dodge tool, burn tool, sponge tool (These
		      last are perhaps more generally: painting with
		      filters tool)
		    - stamp tool (paint with patttern/image selection) (#Cyrille)
		    - Text tool
		    - Measure tool
		    - Pan tool (hand)
		    - Gradient tool
	* Pressure sensivitize all relevant tools (e.g. line tool)
        * Add resize slider to freehand tools that resizes the mean brush size.
          


Plugins

	* As many filters as possible :-)
	* Fix filters to use current image, instead of first image in
	  the document.
        * Make tools and color strategy plugins into ktrader managed
          objects.
        * Rename all plugins to have a krita prefix. 
        * Move all color strategies and tools to plugins. (#Boudewijn)


That's more or less all for version 1,0; afterwards I propose to move to:

Core
	* Add bit-depth independence
	* Completely hide data storage backend from the code behind
	  iterators.
	* Add color models for LAB etc.
	* Make pipe brushes pay attention to parasites

User interface

	* Add action (macro) docker
	* Add navigation/zoom docker
	* Add scriptability 
	* Add third cursor mode:  outline of current brush
	* Rethink document model (perhaps add dynamic links between images)
        * Use OpenGL if available to composite checkerboard with image so
          while scrolling the checks can stay in place, and the partially
          transparent image move. This maybe needs Qt 4.
Tools

	* Implement path tools
	* Calligraphic pen tool
	* Sumi-e brush tool
	* Natural media tools (chalk, ink, oil, watercolour -- fun!)



A much shorter list, much harder  TODO's :-).
