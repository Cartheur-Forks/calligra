<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>KD Chart 2: KDChartAbstractArea.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.6 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>KDChartAbstractArea.cpp</h1><a href="_k_d_chart_abstract_area_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="comment">/****************************************************************************</span>
00002 <span class="comment"> ** Copyright (C) 2006 Klar√§lvdalens Datakonsult AB.  All rights reserved.</span>
00003 <span class="comment"> **</span>
00004 <span class="comment"> ** This file is part of the KD Chart library.</span>
00005 <span class="comment"> **</span>
00006 <span class="comment"> ** This file may be distributed and/or modified under the terms of the</span>
00007 <span class="comment"> ** GNU General Public License version 2 as published by the Free Software</span>
00008 <span class="comment"> ** Foundation and appearing in the file LICENSE.GPL included in the</span>
00009 <span class="comment"> ** packaging of this file.</span>
00010 <span class="comment"> **</span>
00011 <span class="comment"> ** Licensees holding valid commercial KD Chart licenses may use this file in</span>
00012 <span class="comment"> ** accordance with the KD Chart Commercial License Agreement provided with</span>
00013 <span class="comment"> ** the Software.</span>
00014 <span class="comment"> **</span>
00015 <span class="comment"> ** This file is provided AS IS with NO WARRANTY OF ANY KIND, INCLUDING THE</span>
00016 <span class="comment"> ** WARRANTY OF DESIGN, MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.</span>
00017 <span class="comment"> **</span>
00018 <span class="comment"> ** See http://www.kdab.net/kdchart for</span>
00019 <span class="comment"> **   information about KDChart Commercial License Agreements.</span>
00020 <span class="comment"> **</span>
00021 <span class="comment"> ** Contact info@kdab.net if any conditions of this</span>
00022 <span class="comment"> ** licensing are not clear to you.</span>
00023 <span class="comment"> **</span>
00024 <span class="comment"> **********************************************************************/</span>
00025 
00026 <span class="preprocessor">#include "<a class="code" href="_k_d_chart_abstract_area_8h.html">KDChartAbstractArea.h</a>"</span>
00027 <span class="preprocessor">#include "KDChartAbstractArea_p.h"</span>
00028 
00029 <span class="preprocessor">#include &lt;qglobal.h&gt;</span>
00030 
00031 <span class="preprocessor">#include &lt;QPainter&gt;</span>
00032 <span class="preprocessor">#include &lt;QRect&gt;</span>
00033 
00034 <span class="preprocessor">#include &lt;KDABLibFakes&gt;</span>
00035 
00036 
00037 <span class="keyword">using</span> <span class="keyword">namespace </span>KDChart;
00038 
<a name="l00039"></a><a class="code" href="_k_d_chart_abstract_area_8cpp.html#a0">00039</a> <span class="preprocessor">#define d (d_func())</span>
00040 <span class="preprocessor"></span>
00041 AbstractArea::Private::Private() :
00042     <a class="code" href="class_k_d_chart_1_1_abstract_area_base.html">AbstractAreaBase</a>::Private()
00043 {
00044     <span class="comment">// this bloc left empty intentionally</span>
00045 }
00046 
00047 
00048 AbstractArea::Private::~Private()
00049 {
00050     <span class="comment">// this bloc left empty intentionally</span>
00051 }
00052 
00053 
<a name="l00054"></a><a class="code" href="class_k_d_chart_1_1_abstract_area.html#_k_d_chart_1_1_abstract_areab0">00054</a> <a class="code" href="class_k_d_chart_1_1_abstract_area.html#_k_d_chart_1_1_abstract_areab0">AbstractArea::AbstractArea</a>()
00055     : <a class="code" href="class_q_object.html">QObject</a>()
00056     , KDChart::<a class="code" href="class_k_d_chart_1_1_abstract_area_base.html">AbstractAreaBase</a>()
00057     , KDChart::<a class="code" href="class_k_d_chart_1_1_abstract_layout_item.html">AbstractLayoutItem</a>()
00058 {
00059     init();
00060 }
00061 
<a name="l00062"></a><a class="code" href="class_k_d_chart_1_1_abstract_area.html#_k_d_chart_1_1_abstract_areaa22">00062</a> <a class="code" href="class_k_d_chart_1_1_abstract_area.html#_k_d_chart_1_1_abstract_areaa22">AbstractArea::~AbstractArea</a>()
00063 {
00064     <span class="comment">// this bloc left empty intentionally</span>
00065 }
00066 
00067 
00068 <span class="keywordtype">void</span> AbstractArea::init()
00069 {
00070     <a class="code" href="_k_d_chart_abstract_area_8cpp.html#a0">d</a>-&gt;amountOfLeftOverlap = 0;
00071     <a class="code" href="_k_d_chart_abstract_area_8cpp.html#a0">d</a>-&gt;amountOfRightOverlap = 0;
00072     <a class="code" href="_k_d_chart_abstract_area_8cpp.html#a0">d</a>-&gt;amountOfTopOverlap = 0;
00073     <a class="code" href="_k_d_chart_abstract_area_8cpp.html#a0">d</a>-&gt;amountOfBottomOverlap = 0;
00074 }
00075 
00076 
<a name="l00077"></a><a class="code" href="class_k_d_chart_1_1_abstract_area.html#_k_d_chart_1_1_polar_coordinate_planea20">00077</a> <span class="keywordtype">int</span> <a class="code" href="class_k_d_chart_1_1_abstract_area.html#_k_d_chart_1_1_polar_coordinate_planea20">AbstractArea::leftOverlap</a>( <span class="keywordtype">bool</span> doNotRecalculate )<span class="keyword"> const</span>
00078 <span class="keyword"></span>{
00079     <span class="comment">// Re-calculate the sizes,</span>
00080     <span class="comment">// so we also get the amountOf..Overlap members set newly:</span>
00081     <span class="keywordflow">if</span>( ! doNotRecalculate )
00082         sizeHint();
00083     <span class="keywordflow">return</span> <a class="code" href="_k_d_chart_abstract_area_8cpp.html#a0">d</a>-&gt;amountOfLeftOverlap;
00084 }
<a name="l00085"></a><a class="code" href="class_k_d_chart_1_1_abstract_area.html#_k_d_chart_1_1_polar_coordinate_planea45">00085</a> <span class="keywordtype">int</span> <a class="code" href="class_k_d_chart_1_1_abstract_area.html#_k_d_chart_1_1_polar_coordinate_planea45">AbstractArea::rightOverlap</a>( <span class="keywordtype">bool</span> doNotRecalculate )<span class="keyword"> const</span>
00086 <span class="keyword"></span>{
00087     <span class="comment">// Re-calculate the sizes,</span>
00088     <span class="comment">// so we also get the amountOf..Overlap members set newly:</span>
00089     <span class="keywordflow">if</span>( ! doNotRecalculate )
00090         sizeHint();
00091     <span class="keywordflow">return</span> <a class="code" href="_k_d_chart_abstract_area_8cpp.html#a0">d</a>-&gt;amountOfRightOverlap;
00092 }
<a name="l00093"></a><a class="code" href="class_k_d_chart_1_1_abstract_area.html#_k_d_chart_1_1_polar_coordinate_planea65">00093</a> <span class="keywordtype">int</span> <a class="code" href="class_k_d_chart_1_1_abstract_area.html#_k_d_chart_1_1_polar_coordinate_planea65">AbstractArea::topOverlap</a>( <span class="keywordtype">bool</span> doNotRecalculate )<span class="keyword"> const</span>
00094 <span class="keyword"></span>{
00095     <span class="comment">// Re-calculate the sizes,</span>
00096     <span class="comment">// so we also get the amountOf..Overlap members set newly:</span>
00097     <span class="keywordflow">if</span>( ! doNotRecalculate )
00098         sizeHint();
00099     <span class="keywordflow">return</span> <a class="code" href="_k_d_chart_abstract_area_8cpp.html#a0">d</a>-&gt;amountOfTopOverlap;
00100 }
<a name="l00101"></a><a class="code" href="class_k_d_chart_1_1_abstract_area.html#_k_d_chart_1_1_polar_coordinate_planea4">00101</a> <span class="keywordtype">int</span> <a class="code" href="class_k_d_chart_1_1_abstract_area.html#_k_d_chart_1_1_polar_coordinate_planea4">AbstractArea::bottomOverlap</a>( <span class="keywordtype">bool</span> doNotRecalculate )<span class="keyword"> const</span>
00102 <span class="keyword"></span>{
00103     <span class="comment">// Re-calculate the sizes,</span>
00104     <span class="comment">// so we also get the amountOf..Overlap members set newly:</span>
00105     <span class="keywordflow">if</span>( ! doNotRecalculate )
00106         sizeHint();
00107     <span class="keywordflow">return</span> <a class="code" href="_k_d_chart_abstract_area_8cpp.html#a0">d</a>-&gt;amountOfBottomOverlap;
00108 }
00109 
00110 
<a name="l00111"></a><a class="code" href="class_k_d_chart_1_1_abstract_area.html#_k_d_chart_1_1_polar_coordinate_planea33">00111</a> <span class="keywordtype">void</span> <a class="code" href="class_k_d_chart_1_1_abstract_area.html#_k_d_chart_1_1_polar_coordinate_planea33">AbstractArea::paintIntoRect</a>( QPainter&amp; painter, <span class="keyword">const</span> QRect&amp; rect )
00112 {
00113     <span class="keyword">const</span> QRect oldGeometry( geometry() );
00114     <span class="keywordflow">if</span>( oldGeometry != rect )
00115         setGeometry( rect );
00116     painter.translate( rect.left(), rect.top() );
00117     <a class="code" href="class_k_d_chart_1_1_abstract_area.html#_k_d_chart_1_1_polar_coordinate_planea29">paintAll</a>( painter );
00118     painter.translate( -rect.left(), -rect.top() );
00119     <span class="keywordflow">if</span>( oldGeometry != rect )
00120         setGeometry( oldGeometry );
00121 }
00122 
<a name="l00123"></a><a class="code" href="class_k_d_chart_1_1_abstract_area.html#_k_d_chart_1_1_polar_coordinate_planea29">00123</a> <span class="keywordtype">void</span> <a class="code" href="class_k_d_chart_1_1_abstract_area.html#_k_d_chart_1_1_polar_coordinate_planea29">AbstractArea::paintAll</a>( QPainter&amp; painter )
00124 {
00125     <span class="comment">// Paint the background and frame</span>
00126     <span class="keyword">const</span> QRect overlappingArea( geometry().adjusted(
00127             -<a class="code" href="_k_d_chart_abstract_area_8cpp.html#a0">d</a>-&gt;amountOfLeftOverlap,
00128             -<a class="code" href="_k_d_chart_abstract_area_8cpp.html#a0">d</a>-&gt;amountOfTopOverlap,
00129             <a class="code" href="_k_d_chart_abstract_area_8cpp.html#a0">d</a>-&gt;amountOfRightOverlap,
00130             <a class="code" href="_k_d_chart_abstract_area_8cpp.html#a0">d</a>-&gt;amountOfBottomOverlap ) );
00131     <a class="code" href="class_k_d_chart_1_1_abstract_area_base.html#_k_d_chart_1_1_text_areaa15">paintBackground</a>( painter, overlappingArea );
00132     <a class="code" href="class_k_d_chart_1_1_abstract_area_base.html#_k_d_chart_1_1_text_areaa17">paintFrame</a>(      painter, overlappingArea );
00133 
00134     <span class="comment">// temporarily adjust the widget size, to be sure all content gets calculated</span>
00135     <span class="comment">// to fit into the inner rectangle</span>
00136     <span class="keyword">const</span> QRect oldGeometry( <a class="code" href="class_k_d_chart_1_1_abstract_area.html#_k_d_chart_1_1_polar_coordinate_planeb0">areaGeometry</a>()  );
00137     QRect inner( <a class="code" href="class_k_d_chart_1_1_abstract_area_base.html#_k_d_chart_1_1_text_areab1">innerRect</a>() );
00138     inner.moveTo(
00139         oldGeometry.left() + inner.left(),
00140         oldGeometry.top()  + inner.top() );
00141     <span class="keyword">const</span> <span class="keywordtype">bool</span> needAdjustGeometry = oldGeometry != inner;
00142     <span class="keywordflow">if</span>( needAdjustGeometry )
00143         setGeometry( inner );
00144     <a class="code" href="class_k_d_chart_1_1_abstract_layout_item.html#_k_d_chart_1_1_abstract_layout_itema1">paint</a>( &amp;painter );
00145     <span class="keywordflow">if</span>( needAdjustGeometry )
00146         setGeometry( oldGeometry );
00147     <span class="comment">//qDebug() &lt;&lt; "AbstractAreaWidget::paintAll() done.";</span>
00148 }
00149 
<a name="l00150"></a><a class="code" href="class_k_d_chart_1_1_abstract_area.html#_k_d_chart_1_1_polar_coordinate_planeb0">00150</a> QRect <a class="code" href="class_k_d_chart_1_1_abstract_area.html#_k_d_chart_1_1_polar_coordinate_planeb0">AbstractArea::areaGeometry</a>()<span class="keyword"> const</span>
00151 <span class="keyword"></span>{
00152     <span class="keywordflow">return</span> geometry();
00153 }
00154 
<a name="l00155"></a><a class="code" href="class_k_d_chart_1_1_abstract_area.html#_k_d_chart_1_1_polar_coordinate_planeb5">00155</a> <span class="keywordtype">void</span> <a class="code" href="class_k_d_chart_1_1_abstract_area.html#_k_d_chart_1_1_polar_coordinate_planeb5">AbstractArea::positionHasChanged</a>()
00156 {
00157     emit positionChanged( <span class="keyword">this</span> );
00158 }
00159 
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Thu May 10 11:06:24 2007 for KD Chart 2 by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > </a>1.3.6 </small></address>
</body>
</html>
